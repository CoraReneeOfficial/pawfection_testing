{% extends 'base.html' %}

{% block title %}Preview Receipt - Checkout{% endblock %}

{% block head %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<style>
  .receipt-success { text-align: center; margin: 2.5rem 0 2rem 0; }
  .receipt-success .fa-receipt { color: var(--primary-color, #5c4d7d); font-size: 3.5em; margin-bottom: 0.5rem; }
  .receipt-options { display: flex; gap: 1.2rem; justify-content: center; margin: 2rem 0 1.5rem 0; }
  .receipt-btn { min-width: 140px; font-size: 1.05em; }
</style>
{% endblock %}

{% block content %}
<div class="container checkout-container">
  <div class="receipt-success">
    <i class="fas fa-receipt"></i>
    <h1>Preview Receipt</h1>
    <p>Please review, email, or print your receipt before finalizing checkout.</p>
  </div>
  <div class="receipt-content" id="printable-receipt">
    {% include 'email/receipt_email.html' %}
  </div>
  <div class="receipt-options">
    <form method="POST" action="{{ url_for('appointments.email_receipt', appointment_id=appointment_id) }}" style="display:inline;">
      <input type="hidden" name="customer_email" value="{{ customer_email }}">
      <button type="submit" class="button button-primary receipt-btn"><i class="fas fa-envelope"></i> Email Receipt</button>
    </form>
    <button type="button" class="button button-secondary receipt-btn" id="print-receipt-btn" onclick="window.print()"><i class="fas fa-print"></i> Print Receipt</button>
    <form method="POST" action="{{ url_for('appointments.finalize_checkout', appointment_id=appointment_id) }}" style="display:inline;">
      <button type="submit" class="button button-success receipt-btn"><i class="fas fa-check"></i> Complete Checkout</button>
    </form>
  </div>
</div>
{% endblock %}
